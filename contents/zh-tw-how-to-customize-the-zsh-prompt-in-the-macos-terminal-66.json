{"title":"如何在 macOS 終端中自定義 zsh 提示","content":"<p> 自從更新到版本 10.15 Catalina 後，macOS 在終端應用程序中默認包含 Z shell (zsh) 而不是 Bash。也就是說，您仍然會在終端內看到帶有白色文本的相同黑色窗口。事情不必一直這樣。 </p> <p> 您可以修飾 zsh 提示符以使其最小化並充分利用空間。我們將向您展示如何在終端應用程序中自定義 zsh 提示，以在您選擇的任何背景下脫穎而出。 </p> <h2 id=\"basics-of-the-zsh-prompt\"> zsh 提示的基礎知識 </h2> <p> 當您啟動終端應用程序時，它會顯示一些有用的信息，例如您上次登錄和命令提示符。這是默認情況下提示通常的樣子。 </p> <pre><code class=\"hljs ruby\">Last login: Wed Feb 3 22:00:40 on console<br>samir@MacBook-Air ~ %</code></pre> <p> zsh 提示符顯示一串文本，其中包含您的用戶名和計算機型號，如 MacBook Air、MacBook Pro、Mac Mini 等。波浪號 (~) 表示提示在主目錄中的位置。 </p> <p> <img alt=\"Default View of zsh prompt\" src=\"images/default-view-of-zsh-prompt-685.jpg\" loading=\"lazy\"> </p> <p> </p> <p> </p> <h2 id=\"create-a-z-shell-profile-to-store-all-settings\"> 創建 Z 殼配置文件以存儲所有設置 </h2> <p> 通常，您必須修改系統文件以更改默認外觀。那是因為 macOS 更新會將所有系統文件重置為默認值，您將丟失所做的所有更改。 </p> <p> 因此，您可以為您的 zsh 配置文件創建一個特定的設置文件，稱為 dotfile，以在 zsh 提示中存儲您想要的所有更改和設置。 </p> <p> 嗯，默認情況下，您不會在 macOS 上找到這個點文件，因此您必須創建一個。建議創建一個新的 .zshrc 配置文件來存儲所有設置，例如 zsh 提示的外觀和行為。 </p> <p> 以下是創建 zsh 配置文件（dotfile）的方法： </p> <p> 1. 打開 <strong> 終端 </strong> 應用程序。 </p> <p> 2. 輸入以下命令並按回車鍵。 </p> <pre><code class=\"hljs\">touch ~/.zshrc</code></pre> <p> 這將在您的用戶帳戶的主目錄中創建一個 .zshrc 配置文件。如果您已啟用查看隱藏的系統文件，則可以在 Finder 的 /User// 路徑下看到它。 </p> <p> 之後，每次啟動終端時，zsh 配置文件都可用於登錄和交互式 shell。但是，它不會在 SSH 會話中處於活動狀態。 </p> <p> 您要對 zsh 提示符進行的所有更改都可以包含在此配置文件中。 </p> <p> </p> <h2 id=\"customize-the-zsh-prompt-in-terminal\"> 在終端中自定義 zsh 提示 </h2> <p> 通常，默認的 zsh 提示符包含用戶名、機器名稱和從用戶主目錄開始的位置等信息。這些詳細信息存儲在 /etc/zshrc 位置的 zsh shell 系統文件中。 </p> <pre><code class=\"hljs perl\">PS1=\"%n@%m %1~ %#\"</code></pre> <p> 在這串變量中： </p> <ul> <li> %n 是您帳戶的用戶名。 </li> <li> %m 是 MacBook 的型號名稱。 </li> <li> %1~ 符號表示當前工作目錄路徑，其中 ~ 去掉 $HOME 目錄位置。 </li> <li> %# 表示如果 shell 以 root（管理員）權限運行，提示將顯示 #，否則提供 % 如果沒有。 </li> </ul> <p> 要對默認 zsh 提示進行任何更改，您必須為提示添加相關值，使其與默認提示不同。 </p> <p> 這是如何去做的。打開 <strong> 終端 </strong> ，鍵入以下命令，然後按 Enter。 </p> <pre><code class=\"hljs\">nano ~/.zshrc</code></pre> <p> 如果您是第一次訪問它，它將是空白的。您可以添加一個帶有文本 PROMPT=&#39;...&#39; 的新行，並在省略號中包含相關值。 </p> <p> 要對 zsh 提示符進行簡單修改，您可以在 .zshrc 配置文件中鍵入這些值。 </p> <pre><code class=\"hljs ruby\">PROMPT='%n~$'</code></pre> <p> 打 <strong> Ctrl + O </strong> 確認對文件進行這些更改，然後點擊 <strong> Ctrl + X </strong> 退出納米編輯器。 </p> <p> <img alt=\"Use only the username in the zsh prompt\" src=\"images/use-only-the-username-in-the-zsh-prompt-531.jpg\" loading=\"lazy\"> </p> <p> 開一個新的 <strong> 終端 </strong> 窗口以確認和查看您剛剛所做的更改。您的新 zsh 提示符將顯示您的 mac 用戶名、主目錄和末尾的 $ 符號。 </p> <p> </p> <h2 id=\"add-date-and-time-in-the-zsh-prompt\"> 在 zsh 提示中添加日期和時間 </h2> <p> 除了您的用戶名之外，您還可以附加當前日期或時間，這樣您就不必將目光從活動的終端窗口移開來檢查該信息。 </p> <p> 啟動終端並打開 .zshrc 配置文件。 </p> <pre><code class=\"hljs\">nano ~/.zshrc</code></pre> <p> 要在提示中包含日期，您可以使用 %D 使日期以 yy-mm-dd 格式顯示或使用 %W 使其以 mm/dd/yy 格式顯示。然後新的提示會出現 </p> <pre><code class=\"hljs ruby\">PROMPT='%n:%W:~$'</code></pre> <p> <img alt=\"How to add date to the zsh prompt\" src=\"images/how-to-add-date-to-the-zsh-prompt-245.jpg\" loading=\"lazy\"> </p> <p> 如果要在 zsh 提示中包含系統時間，請添加 %T 表示當前時間以 24 小時格式顯示，%t 表示時間以 am/pm 或 12 小時格式顯示，或使用 %* 顯示24 小時格式的時間和秒。 </p> <pre><code class=\"hljs ruby\">PROMPT='%n:%T:~$'</code></pre> <p> <img alt=\"How to show Time on the zsh prompt\" src=\"images/how-to-show-time-on-the-zsh-prompt-258.jpg\" loading=\"lazy\"> </p> <p> </p> <h2 id=\"add-color-to-text-in-the-zsh-prompt\"> 在 zsh 提示中為文本添加顏色 </h2> <p> 您是否對 zsh 提示的白色文本感到厭煩？除了 <a href=\"https://www.makeuseof.com/tag/customize-mac-terminal/\" target=\"_blank\" rel=\"nofollow noopener\"> 修改終端應用程序 </a> 使用顏色，您可以為文本添加一些顏色，以便獲得不錯的視覺效果。 </p> <p> 發射 <strong> 終端 </strong> 並打開 .zshrc 配置文件。 </p> <pre><code class=\"hljs\">nano ~/.zshrc</code></pre> <p> zsh 支持提示文本的顏色和灰色陰影，以便它補充背景。您可以選擇黑色、白色、黃色、綠色、紅色、藍色、青色和洋紅色之間的前景色（文本）顏色。 </p> <p> 以下是如何使用它們。 </p> <pre><code class=\"hljs ruby\">PROMPT='%F{cyan}%n%f:~$'</code></pre> <p> <img alt=\"How to add color the zsh prompt\" src=\"images/how-to-add-color-the-zsh-prompt-993.jpg\" loading=\"lazy\"> </p> <p> 如果您想選擇特定的陰影，您可以在終端支持的 0 到 256 種 8 位顏色之間進行選擇。下面介紹如何使用顏色的數值。 </p> <pre><code class=\"hljs ruby\">PROMPT='%F{51}%n%f:~$'</code></pre> <p> 您需要在要著色的相關文本之間放置 %F 和 %f 默認前景色變量。 </p> <p> </p> <h2 id=\"adding-visual-effects-in-the-zsh-prompt\"> 在 zsh 提示中添加視覺效果 </h2> <p> 如果對提示文本著色還不夠，您可以突出顯示 zsh 提示，使其在文本牆中脫穎而出，並且您可以輕鬆發現它。對於初學者，您可以將 zsh 提示加粗。 </p> <pre><code class=\"hljs ruby\">PROMPT='%B%F{51}%n%f%b:~$'</code></pre> <p> 在開頭添加 %B 並將 %b 放在相關文本之間的末尾將使其變為粗體。 </p> <p> <img alt=\"How to bold text in the zsh prompt text\" src=\"images/how-to-bold-the-zsh-prompt-text-261.jpg\" loading=\"lazy\"> </p> <p> 同樣，您可以將 %S 放在開頭，將 %s 放在結尾以突出顯示文本。突出顯示將帶有您選擇在 %S 和 %s 變量之間顯示的相同顏色。 </p> <pre><code class=\"hljs ruby\">PROMPT='%S%F{51}%n%f%s:~$'</code></pre> <p> <img alt=\"How to Highlight the zsh prompt\" src=\"images/how-to-highlight-the-zsh-prompt-422.jpg\" loading=\"lazy\"> </p> <p> 您還可以在 zsh 提示的文本下加下劃線。要在提示後添加下劃線，您可以在相關文本的開頭包含 %U 變量，在相關文本的結尾包含 %u 變量。 </p> <pre><code class=\"hljs ruby\">PROMPT='%U%F{51}%n%f%u:~$'</code></pre> <p> <img alt=\"How to Underline the zsh prompt\" src=\"images/how-to-underline-the-zsh-prompt-962.jpg\" loading=\"lazy\"> </p> <p> </p> <h2 id=\"remove-the-last-login-details-from-the-zsh-prompt\"> 從 zsh 提示中刪除上次登錄詳細信息 </h2> <p> 在終端應用程序中隱藏或禁用顯示上次登錄時間的頂行可以讓您的 zsh 提示看起來更乾淨。您可以使用以下命令隱藏該信息。 </p> <pre><code class=\"hljs ruby\">Last login: Wed Feb 3 22:00:40 on console<br>samir@MacBook-Air ~ %</code></pre> <p> 下次打開終端時，您將看不到 zsh 提示上方的任何內容。 </p> <p> </p> <h2 id=\"spice-up-the-zsh-prompt-in-terminal\"> 為終端中的 zsh 提示增添趣味 </h2> <p> 即使您偶爾在 macOS 上使用終端應用程序，您也可以調整 zsh 提示出現在那裡的方式。您可以在其中加粗、加下劃線、縮短甚至包括日期和時間。 </p> <p> 既然您已經開始自定義 zsh 提示，請嘗試一下並使其成為您自己的提示。 </p>"}